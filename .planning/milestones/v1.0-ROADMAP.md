# Milestone v1.0: MVP

**Status:** ✅ SHIPPED 2026-01-30
**Phases:** 1-4
**Total Plans:** 8

## Overview

This WordPress plugin delivers markdown versions of posts and pages through dedicated `.md` URLs and HTTP content negotiation. The milestone progressed from core infrastructure (URL routing), through content conversion (the core value), to discovery mechanisms (headers and alternate links), and finally extensibility (custom post types and fallbacks). Four sequential phases ensure each capability builds on proven foundations.

## Phases

### Phase 1: Core Infrastructure & URL Routing

**Goal**: Plugin loads correctly and serves markdown at `/post-slug.md` URLs for posts and pages
**Depends on**: Nothing (first phase)
**Plans**: 2 plans

Plans:
- [x] 01-01-PLAN.md — Project setup with Composer, plugin bootstrap, and documentation
- [x] 01-02-PLAN.md — URL routing with rewrite rules and markdown request handler

**Details:**
- Requirements covered: INFR-01, INFR-02, INFR-03, URL-01, TECH-01
- Key deliverables: Plugin bootstrap with Composer PSR-4 autoloading, RewriteHandler with .md URL routing, edge case handling (trailing slash, case sensitivity, post status, password protection), WordPress.org readme.txt and GitHub README.md
- Verification: 12/12 must-haves verified

### Phase 2: Content Conversion & Metadata

**Goal**: Markdown output is complete, properly formatted, and includes all post metadata
**Depends on**: Phase 1
**Plans**: 2 plans

Plans:
- [x] 02-01-PLAN.md — Install league/html-to-markdown and create MarkdownConverter wrapper
- [x] 02-02-PLAN.md — Create ContentRenderer for frontmatter/body and wire into RewriteHandler

**Details:**
- Requirements covered: CONT-01, CONT-02, CONT-03, CONT-04, CONT-05, CONT-06, CONT-07, TECH-02
- Key deliverables: league/html-to-markdown 5.1.1 installed with secure wrapper, ContentRenderer with YAML frontmatter (title, date, author, featured_image, categories, tags), H1 title heading after frontmatter, HTML-to-markdown conversion with security (strips script/style/iframe), footer with categories/tags in readable format
- Verification: 8/8 must-haves verified

### Phase 3: Content Negotiation & Discovery

**Goal**: Markdown is discoverable via HTTP headers and programmatically accessible via alternate links
**Depends on**: Phase 2
**Plans**: 2 plans

Plans:
- [x] 03-01-PLAN.md — Response headers and Accept header content negotiation
- [x] 03-02-PLAN.md — Alternate link discovery via wp_head

**Details:**
- Requirements covered: URL-02, URL-03, TECH-03, TECH-04
- Key deliverables: Response headers (Content-Type, Vary: Accept, Link canonical, X-Content-Type-Options), Accept header negotiation with 303 redirect to .md URLs, AlternateLinkHandler class for wp_head alternate link injection
- Verification: 4/4 must-haves verified

### Phase 4: Extensibility & Fallbacks

**Goal**: Plugin works in edge cases (no Accept headers) and is extensible for custom post types
**Depends on**: Phase 3
**Plans**: 2 plans

Plans:
- [x] 04-01-PLAN.md — Query parameter fallback and filterable custom post type support
- [x] 04-02-PLAN.md — Documentation for query parameter and custom post type extensibility

**Details:**
- Requirements covered: URL-04, TECH-05
- Key deliverables: Query parameter fallback (?format=markdown) in RewriteHandler, filterable post type support via markdown_alternate_supported_post_types filter, documentation in README.md (For Developers section) and readme.txt (FAQ, changelog)
- Verification: 4/4 must-haves verified

---

## Milestone Summary

**Decimal Phases:** None (no urgent insertions required)

**Key Decisions:**
- Singleton pattern for Plugin class
- PSR-4 autoloading: MarkdownAlternate\ namespace maps to src/
- Non-greedy regex (.+?)\.md$ for nested page support
- Template redirect priority 1 for early interception
- Lowercase .md extension only (uppercase returns 404)
- 403 Forbidden for password-protected posts
- ATX-style headers (# style) for markdown output
- Strip unknown HTML tags for clean markdown
- Remove script, style, iframe tags for security
- Categories/tags in both frontmatter (YAML) and footer (readable)
- Featured image omitted when not set (clean YAML)
- YAML values escaped for quotes and backslashes
- Vary: Accept on both markdown responses and 303 redirects
- Simple strpos() check for text/markdown - no quality factor parsing
- URL wins over Accept header (markdown_request check first)
- Priority order: URL (.md) > query param (?format=markdown) > Accept header
- Filter hook name: markdown_alternate_supported_post_types

**Issues Resolved:** None (clean development)

**Issues Deferred:** None

**Technical Debt Incurred:** None

---

*For current project status, see .planning/PROJECT.md*
